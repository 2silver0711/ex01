<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>The Whiskey Counter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Pretendard', system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans KR', 'Apple SD Gothic Neo', sans-serif; }
    .scrollbar-hide::-webkit-scrollbar { display:none; }
    .scrollbar-hide { -ms-overflow-style:none; scrollbar-width:none; }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">
  <div class="max-w-7xl mx-auto p-4 md:p-6">
    <header class="mb-6">
      <div class="flex items-center gap-3">
        <span class="inline-flex items-center justify-center w-10 h-10 rounded-xl bg-amber-100 text-amber-700">
          <!-- lucide Wine ì•„ì´ì½˜ê³¼ ë¹„ìŠ·í•œ SVG -->
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M8 22h8M12 22V14m7-9a7 7 0 0 1-14 0V3h14v2Z" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <div>
          <h1 class="text-2xl md:text-3xl font-bold">The Whiskey Counter</h1>
          <p class="text-gray-600">Premium Whiskey Experience.</p>
        </div>
      </div>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- ë©”ë‰´ ì˜ì—­ -->
      <section class="lg:col-span-2">
        <!-- ì¹´í…Œê³ ë¦¬ íƒ­ -->
        <div id="tabs" class="flex gap-2 flex-wrap mb-4"></div>

        <!-- ì•„ì´í…œ ê·¸ë¦¬ë“œ -->
        <div id="menuGrid" class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4"></div>
      </section>

      <!-- ì¥ë°”êµ¬ë‹ˆ -->
      <aside class="lg:col-span-1">
        <div class="bg-white rounded-2xl border border-gray-100 shadow-sm p-4 md:p-5 sticky top-4">
          <div class="flex items-center justify-between mb-3">
            <h2 class="text-xl font-semibold">Order Cart</h2>
            <button id="clearCart" class="text-sm text-gray-500 hover:text-gray-700 underline">ë¹„ìš°ê¸°</button>
          </div>
          <div id="cartList" class="divide-y divide-gray-100 max-h-[50vh] overflow-auto pr-1 scrollbar-hide"></div>
          <div class="mt-4 space-y-2">
            <div class="flex justify-between text-sm text-gray-600">
              <span>ì†Œê³„</span><span id="subtotal">0ì›</span>
            </div>
            <div class="flex justify-between text-base font-semibold">
              <span>ì´í•©</span><span id="grandTotal">0ì›</span>
            </div>
            <button id="checkout" class="w-full mt-3 py-3 rounded-xl bg-amber-600 text-white font-semibold hover:bg-amber-700 transition">ì£¼ë¬¸ ì™„ë£Œ</button>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <!-- ì£¼ë¬¸ ì™„ë£Œ ëª¨ë‹¬ -->
  <div id="modal" class="fixed inset-0 bg-black/40 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl p-6 w-full max-w-md">
      <h3 class="text-xl font-bold mb-2">ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ¥ƒ</h3>
      <p class="text-gray-600 mb-4">ì•„ë˜ ì˜ìˆ˜ì¦ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
      <div id="receipt" class="bg-gray-50 rounded-xl p-4 text-sm max-h-60 overflow-auto"></div>
      <div class="mt-4 flex justify-end gap-2">
        <button id="closeModal" class="px-4 py-2 rounded-lg border">ë‹«ê¸°</button>
        <button id="newOrder" class="px-4 py-2 rounded-lg bg-amber-600 text-white">ìƒˆ ì£¼ë¬¸</button>
      </div>
    </div>
  </div>

  <script>
  /* ==== ë°ì´í„° (TSX -> JSë¡œ ì¹˜í™˜) ==== */
  const whiskeyMenu = [
    { id: "glenfiddich-12", name: "Glenfiddich 12", price: 13000, abv: 40, age: 12, region: "Scotland", category: "ì‹±ê¸€ ëª°íŠ¸ ìŠ¤ì¹´ì¹˜", description: "ë°°ì™€ ì˜¤í¬, ë°”ë‹ë¼ í–¥ì˜ ê· í˜•", imageUrl: "https://images.unsplash.com/photo-1517315003714-a071486bd9ea?w=800&auto=format&fit=crop&q=60" },
    { id: "macallan-12", name: "Macallan 12 Sherry Oak", price: 18000, abv: 40, age: 12, region: "Scotland", category: "ì‹±ê¸€ ëª°íŠ¸ ìŠ¤ì¹´ì¹˜", description: "ì…°ë¦¬ ì˜¤í¬ ìˆ™ì„±ì˜ ë‹¬ì½¤í•œ í’ë¯¸", imageUrl: "https://images.unsplash.com/photo-1622470953794-07b1d9fbaa36?w=800&auto=format&fit=crop&q=60" },
    { id: "lagavulin-16", name: "Lagavulin 16", price: 22000, abv: 43, age: 16, region: "Islay, Scotland", category: "ì‹±ê¸€ ëª°íŠ¸ ìŠ¤ì¹´ì¹˜", description: "ê°•í•œ í”¼íŠ¸ì™€ ìŠ¤ëª¨í‚¤, ë°”ë‹¤ì˜ í’ë¯¸", imageUrl: "https://images.unsplash.com/photo-1622839459874-86e0e8878b4e?w=800&auto=format&fit=crop&q=60" },
    { id: "talisker-10", name: "Talisker 10", price: 16000, abv: 45.8, age: 10, region: "Isle of Skye, Scotland", category: "ì‹±ê¸€ ëª°íŠ¸ ìŠ¤ì¹´ì¹˜", description: "ë°”ë‹¤ ì†Œê¸ˆ, í›„ì¶”, ìŠ¤ëª¨í‚¤ì˜ ì¡°í™”", imageUrl: "https://images.unsplash.com/photo-1549122825-17143bf3ff14?w=800&auto=format&fit=crop&q=60" },
    { id: "oban-14", name: "Oban 14", price: 19000, abv: 43, age: 14, region: "Highland, Scotland", category: "ì‹±ê¸€ ëª°íŠ¸ ìŠ¤ì¹´ì¹˜", description: "ì‹œíŠ¸ëŸ¬ìŠ¤ì™€ ê¿€, í›ˆì—°ì˜ ê· í˜•", imageUrl: "https://images.unsplash.com/photo-1600950200121-b4939de211f6?w=800&auto=format&fit=crop&q=60" },
    { id: "johnnie-blue", name: "Johnnie Walker Blue Label", price: 28000, abv: 40, age: null, region: "Scotland", category: "ë¸”ë Œë””ë“œ ìŠ¤ì¹´ì¹˜", description: "ë¶€ë“œëŸ½ê³  ê¹Šì€ ë³µí•©ë¯¸", imageUrl: "https://images.unsplash.com/photo-1624434261316-b7c968b13869?w=800&auto=format&fit=crop&q=60" },
    { id: "chivas-18", name: "Chivas Regal 18", price: 15000, abv: 40, age: 18, region: "Scotland", category: "ë¸”ë Œë””ë“œ ìŠ¤ì¹´ì¹˜", description: "ì´ˆì½œë¦¿ê³¼ ë§ë¦° ê³¼ì¼ì˜ í’ë¯¸", imageUrl: "https://images.unsplash.com/photo-1624840769924-8ee545e95229?w=800&auto=format&fit=crop&q=60" },
    { id: "dewars-12", name: "Dewar's 12", price: 11000, abv: 40, age: 12, region: "Scotland", category: "ë¸”ë Œë””ë“œ ìŠ¤ì¹´ì¹˜", description: "ê¿€ê³¼ ë°°, ë°”ë‹ë¼ì˜ ì¡°í™”", imageUrl: "https://images.unsplash.com/photo-1582336959301-91183b35a6b9?w=800&auto=format&fit=crop&q=60" },
    { id: "bushmills-10", name: "Bushmills 10", price: 12000, abv: 40, age: 10, region: "Ireland", category: "ì•„ì´ë¦¬ì‹œ ìœ„ìŠ¤í‚¤", description: "ê¿€ê³¼ ë°”ë‹ë¼, ì‚¬ê³¼ í–¥ì˜ ë¶€ë“œëŸ¬ì›€", imageUrl: "https://images.unsplash.com/photo-1508057198894-247b23fe5ade?w=800&auto=format&fit=crop&q=60" },
    { id: "jameson", name: "Jameson", price: 9000, abv: 40, age: null, region: "Ireland", category: "ì•„ì´ë¦¬ì‹œ ìœ„ìŠ¤í‚¤", description: "ë¼ì´íŠ¸í•˜ê³  ìŠ¤ë¬´ìŠ¤í•œ ë°”ë””", imageUrl: "https://images.unsplash.com/photo-1581695144789-1c42a8c161c5?w=800&auto=format&fit=crop&q=60" },
    { id: "redbreast-12", name: "Redbreast 12", price: 17000, abv: 40, age: 12, region: "Ireland", category: "ì•„ì´ë¦¬ì‹œ ìœ„ìŠ¤í‚¤", description: "ì…°ë¦¬ì™€ ì˜¤í¬, ìŠ¤íŒŒì´ìŠ¤ì˜ ë°¸ëŸ°ìŠ¤", imageUrl: "https://images.unsplash.com/photo-1571246284575-c6dcf86c3999?w=800&auto=format&fit=crop&q=60" },
    { id: "hibiki-harmony", name: "Hibiki Japanese Harmony", price: 21000, abv: 43, age: null, region: "Japan", category: "ì¼ë³¸ ìœ„ìŠ¤í‚¤", description: "ê½ƒí–¥ê¸°ì™€ ê¿€, ì˜¤í¬ì˜ ë¶€ë“œëŸ¬ìš´ ì¡°í™”", imageUrl: "https://images.unsplash.com/photo-1607518124360-84f5e0af3dc3?w=800&auto=format&fit=crop&q=60" },
    { id: "yamazaki-12", name: "Yamazaki 12", price: 30000, abv: 43, age: 12, region: "Japan", category: "ì¼ë³¸ ìœ„ìŠ¤í‚¤", description: "ë³µìˆ­ì•„, ë°”ë‹ë¼, ì˜¤í¬ì˜ ë°¸ëŸ°ìŠ¤", imageUrl: "https://images.unsplash.com/photo-1632187988684-67cde5f80e4d?w=800&auto=format&fit=crop&q=60" },
    { id: "nikka-coffey", name: "Nikka Coffey Grain", price: 16000, abv: 45, age: null, region: "Japan", category: "ì¼ë³¸ ìœ„ìŠ¤í‚¤", description: "ë°”ë‹ë¼, ì¹´ë¼ë©œ, ì‹œíŠ¸ëŸ¬ìŠ¤", imageUrl: "https://images.unsplash.com/photo-1600950200121-b4939de211f6?w=800&auto=format&fit=crop&q=60" },
    { id: "makers-46", name: "Maker's Mark 46", price: 14000, abv: 47, age: null, region: "USA", category: "ë²„ë²ˆ & ë¼ì´", description: "ìŠ¤íŒŒì´ìŠ¤ì™€ ë°”ë‹ë¼ì˜ ì§„í•œ í’ë¯¸", imageUrl: "https://images.unsplash.com/photo-1614709125953-34c90d48e3a1?w=800&auto=format&fit=crop&q=60" },
    { id: "woodford-double", name: "Woodford Reserve Double Oaked", price: 17000, abv: 45.2, age: null, region: "USA", category: "ë²„ë²ˆ & ë¼ì´", description: "í† í”¼, ìºëŸ¬ë©œ, ì˜¤í¬ì˜ ë‹¬ì½¤í•¨", imageUrl: "https://images.unsplash.com/photo-1553484771-5c9124303e4b?w=800&auto=format&fit=crop&q=60" },
    { id: "bulleit-rye", name: "Bulleit Rye", price: 12000, abv: 45, age: null, region: "USA", category: "ë²„ë²ˆ & ë¼ì´", description: "ë¼ì´ìŠ¤íŒŒì´ìŠ¤ì™€ ì˜¤í¬ì˜ ë‹¨ë‹¨í•¨", imageUrl: "https://images.unsplash.com/photo-1546820389-44d77e1f3b31?w=800&auto=format&fit=crop&q=60" },
    { id: "balvenie-14", name: "Balvenie 14 Caribbean Cask", price: 20000, abv: 43, age: 14, region: "Scotland", category: "ì‹±ê¸€ ëª°íŠ¸ ìŠ¤ì¹´ì¹˜", description: "ëŸ¼ ìºìŠ¤í¬ ê°ê·¤&ë°”ë‹ë¼", imageUrl: "https://images.unsplash.com/photo-1497534446932-c925b458314e?w=800&auto=format&fit=crop&q=60" },
    { id: "ardbeg-10", name: "Ardbeg 10", price: 18000, abv: 46, age: 10, region: "Islay, Scotland", category: "ì‹±ê¸€ ëª°íŠ¸ ìŠ¤ì¹´ì¹˜", description: "ê°•ë ¬í•œ í”¼íŠ¸&ì—°ê¸°, ë°”ë‹¤", imageUrl: "https://images.unsplash.com/photo-1614709126328-19b68f2a89e1?w=800&auto=format&fit=crop&q=60" }
  ];

  const categoryNames = ["ì‹±ê¸€ ëª°íŠ¸ ìŠ¤ì¹´ì¹˜", "ë¸”ë Œë””ë“œ ìŠ¤ì¹´ì¹˜", "ì•„ì´ë¦¬ì‹œ ìœ„ìŠ¤í‚¤", "ì¼ë³¸ ìœ„ìŠ¤í‚¤", "ë²„ë²ˆ & ë¼ì´"];

  /* ===== ìƒíƒœ & ìœ í‹¸ ===== */
  let activeCategory = categoryNames[0];
  const cart = new Map(); // key: id, value: { item, qty }
  const formatWon = (n) => n.toLocaleString('ko-KR') + 'ì›';
  const byCategory = whiskeyMenu.reduce((acc, item) => { (acc[item.category] ||= []).push(item); return acc; }, {});

  /* ===== ë Œë” ===== */
  function renderTabs() {
    const tabs = document.getElementById('tabs');
    tabs.innerHTML = '';
    categoryNames.forEach(cat => {
      const btn = document.createElement('button');
      btn.className = 'px-3 py-1.5 rounded-full text-sm border ' + (cat === activeCategory ? 'bg-amber-600 text-white border-amber-600' : 'bg-white text-gray-700 border-gray-200 hover:bg-gray-50');
      btn.textContent = cat;
      btn.onclick = () => { activeCategory = cat; renderTabs(); renderMenu(); };
      tabs.appendChild(btn);
    });
  }

  function cardTemplate(item) {
    return `
      <div class="bg-white rounded-2xl shadow-sm hover:shadow-md transition overflow-hidden border border-gray-100">
        <div class="aspect-[4/5] bg-gray-100 overflow-hidden">
          <img src="${item.imageUrl}" alt="${item.name}" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1514361892635-6d061d863f7b?w=600&auto=format&fit=crop'"/>
        </div>
        <div class="p-4">
          <h3 class="font-semibold text-lg text-gray-900">${item.name}</h3>
          <div class="flex items-center justify-between mt-2">
            <span class="text-amber-700 font-bold">${formatWon(item.price)}</span>
            <button class="px-3 h-9 rounded-lg border text-sm font-medium hover:bg-gray-50 add-btn" data-id="${item.id}">ì¶”ê°€</button>
          </div>
          <p class="text-sm text-gray-600 mt-2">${item.description}</p>
          <div class="flex gap-2 text-xs text-gray-500 mt-2">
            <span>ABV ${item.abv}%</span>
            ${item.age ? `<span>â€¢ ${item.age}ë…„</span>` : ''}
            <span>â€¢ ${item.region}</span>
          </div>
        </div>
      </div>`;
  }

  function renderMenu() {
    const grid = document.getElementById('menuGrid');
    const items = byCategory[activeCategory] || [];
    grid.innerHTML = items.map(cardTemplate).join('');
    grid.onclick = (e) => {
      const btn = e.target.closest('.add-btn');
      if (!btn) return;
      const id = btn.dataset.id;
      const item = whiskeyMenu.find(i => i.id === id);
      const prev = cart.get(id) || { item, qty: 0 };
      cart.set(id, { item, qty: prev.qty + 1 });
      renderCart();
    };
  }

  function renderCart() {
    const list = document.getElementById('cartList');
    const entries = Array.from(cart.values());
    if (entries.length === 0) {
      list.innerHTML = '<p class="py-8 text-center text-gray-500">ì•„ì§ ë‹´ê¸´ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
    } else {
      list.innerHTML = entries.map(({ item, qty }) => `
        <div class="py-3 flex items-center justify-between gap-3">
          <div class="flex items-center gap-3 min-w-0">
            <img src="${item.imageUrl}" alt="" class="w-12 h-12 rounded-lg object-cover"/>
            <div class="min-w-0">
              <p class="font-medium truncate">${item.name}</p>
              <p class="text-xs text-gray-500">${formatWon(item.price)} â€¢ ABV ${item.abv}%</p>
            </div>
          </div>
          <div class="flex items-center gap-2 shrink-0">
            <button class="w-8 h-8 rounded-lg border hover:bg-gray-50 qty-btn" data-id="${item.id}" data-delta="-1">-</button>
            <span class="w-6 text-center">${qty}</span>
            <button class="w-8 h-8 rounded-lg border hover:bg-gray-50 qty-btn" data-id="${item.id}" data-delta="1">+</button>
            <button class="ml-1 text-xs text-gray-500 hover:text-red-600 remove-btn" data-id="${item.id}">ì‚­ì œ</button>
          </div>
        </div>
      `).join('');
    }
    const subtotal = entries.reduce((sum, {item, qty}) => sum + item.price * qty, 0);
    document.getElementById('subtotal').textContent = formatWon(subtotal);
    document.getElementById('grandTotal').textContent = formatWon(subtotal);

    list.onclick = (e) => {
      const qtyBtn = e.target.closest('.qty-btn');
      if (qtyBtn) {
        const id = qtyBtn.dataset.id;
        const delta = parseInt(qtyBtn.dataset.delta, 10);
        const cur = cart.get(id);
        if (!cur) return;
        const nextQty = cur.qty + delta;
        if (nextQty <= 0) cart.delete(id); else cart.set(id, { item: cur.item, qty: nextQty });
        renderCart();
        return;
      }
      const rm = e.target.closest('.remove-btn');
      if (rm) {
        cart.delete(rm.dataset.id);
        renderCart();
      }
    };
  }

  function openModal() {
    const receipt = document.getElementById('receipt');
    const entries = Array.from(cart.values());
    if (entries.length == 0) {
      receipt.innerHTML = '<p>ë‹´ê¸´ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
    } else {
      const lines = entries.map(({ item, qty }) => 
        `<div class="flex justify-between"><span>${item.name} Ã— ${qty}</span><span>${formatWon(item.price*qty)}</span></div>`
      );
      const total = entries.reduce((s, {item, qty}) => s + item.price*qty, 0);
      receipt.innerHTML = lines.join('') + 
        `<hr class="my-2"/><div class="flex justify-between font-semibold"><span>ì´í•©</span><span>${formatWon(total)}</span></div>`;
    }
    document.getElementById('modal').classList.remove('hidden');
    document.getElementById('modal').classList.add('flex');
  }
  function closeModal() {
    const modal = document.getElementById('modal');
    modal.classList.add('hidden');
    modal.classList.remove('flex');
  }

  document.getElementById('clearCart').onclick = () => { cart.clear(); renderCart(); };
  document.getElementById('checkout').onclick = () => { openModal(); };
  document.getElementById('closeModal').onclick = closeModal;
  document.getElementById('newOrder').onclick = () => { cart.clear(); renderCart(); closeModal(); };

  renderTabs();
  renderMenu();
  renderCart();
  </script>
</body>
</html>