<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>The Whiskey Counter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Pretendard', system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans KR', 'Apple SD Gothic Neo', sans-serif; }
    .scrollbar-hide::-webkit-scrollbar { display:none; }
    .scrollbar-hide { -ms-overflow-style:none; scrollbar-width:none; }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">
  <div class="max-w-7xl mx-auto p-4 md:p-6">
    <header class="mb-6">
      <div class="flex items-center gap-3">
        <span class="inline-flex items-center justify-center w-10 h-10 rounded-xl bg-amber-100 text-amber-700">
          <!-- lucide Wine 아이콘과 비슷한 SVG -->
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M8 22h8M12 22V14m7-9a7 7 0 0 1-14 0V3h14v2Z" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <div>
          <h1 class="text-2xl md:text-3xl font-bold">The Whiskey Counter</h1>
          <p class="text-gray-600">Premium Whiskey Experience.</p>
        </div>
      </div>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- 메뉴 영역 -->
      <section class="lg:col-span-2">
        <!-- 카테고리 탭 -->
        <div id="tabs" class="flex gap-2 flex-wrap mb-4"></div>

        <!-- 아이템 그리드 -->
        <div id="menuGrid" class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4"></div>
      </section>

      <!-- 장바구니 -->
      <aside class="lg:col-span-1">
        <div class="bg-white rounded-2xl border border-gray-100 shadow-sm p-4 md:p-5 sticky top-4">
          <div class="flex items-center justify-between mb-3">
            <h2 class="text-xl font-semibold">Order Cart</h2>
            <button id="clearCart" class="text-sm text-gray-500 hover:text-gray-700 underline">비우기</button>
          </div>
          <div id="cartList" class="divide-y divide-gray-100 max-h-[50vh] overflow-auto pr-1 scrollbar-hide"></div>
          <div class="mt-4 space-y-2">
            <div class="flex justify-between text-sm text-gray-600">
              <span>소계</span><span id="subtotal">0원</span>
            </div>
            <div class="flex justify-between text-base font-semibold">
              <span>총합</span><span id="grandTotal">0원</span>
            </div>
            <button id="checkout" class="w-full mt-3 py-3 rounded-xl bg-amber-600 text-white font-semibold hover:bg-amber-700 transition">주문 완료</button>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <!-- 주문 완료 모달 -->
  <div id="modal" class="fixed inset-0 bg-black/40 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl p-6 w-full max-w-md">
      <h3 class="text-xl font-bold mb-2">주문이 완료되었습니다! 🥃</h3>
      <p class="text-gray-600 mb-4">아래 영수증을 확인해주세요.</p>
      <div id="receipt" class="bg-gray-50 rounded-xl p-4 text-sm max-h-60 overflow-auto"></div>
      <div class="mt-4 flex justify-end gap-2">
        <button id="closeModal" class="px-4 py-2 rounded-lg border">닫기</button>
        <button id="newOrder" class="px-4 py-2 rounded-lg bg-amber-600 text-white">새 주문</button>
      </div>
    </div>
  </div>

  <script>
  /* ==== 데이터 (TSX -> JS로 치환) ==== */
  const whiskeyMenu = [
    { id: "glenfiddich-12", name: "Glenfiddich 12", price: 13000, abv: 40, age: 12, region: "Scotland", category: "싱글 몰트 스카치", description: "배와 오크, 바닐라 향의 균형", imageUrl: "https://images.unsplash.com/photo-1517315003714-a071486bd9ea?w=800&auto=format&fit=crop&q=60" },
    { id: "macallan-12", name: "Macallan 12 Sherry Oak", price: 18000, abv: 40, age: 12, region: "Scotland", category: "싱글 몰트 스카치", description: "셰리 오크 숙성의 달콤한 풍미", imageUrl: "https://images.unsplash.com/photo-1622470953794-07b1d9fbaa36?w=800&auto=format&fit=crop&q=60" },
    { id: "lagavulin-16", name: "Lagavulin 16", price: 22000, abv: 43, age: 16, region: "Islay, Scotland", category: "싱글 몰트 스카치", description: "강한 피트와 스모키, 바다의 풍미", imageUrl: "https://images.unsplash.com/photo-1622839459874-86e0e8878b4e?w=800&auto=format&fit=crop&q=60" },
    { id: "talisker-10", name: "Talisker 10", price: 16000, abv: 45.8, age: 10, region: "Isle of Skye, Scotland", category: "싱글 몰트 스카치", description: "바다 소금, 후추, 스모키의 조화", imageUrl: "https://images.unsplash.com/photo-1549122825-17143bf3ff14?w=800&auto=format&fit=crop&q=60" },
    { id: "oban-14", name: "Oban 14", price: 19000, abv: 43, age: 14, region: "Highland, Scotland", category: "싱글 몰트 스카치", description: "시트러스와 꿀, 훈연의 균형", imageUrl: "https://images.unsplash.com/photo-1600950200121-b4939de211f6?w=800&auto=format&fit=crop&q=60" },
    { id: "johnnie-blue", name: "Johnnie Walker Blue Label", price: 28000, abv: 40, age: null, region: "Scotland", category: "블렌디드 스카치", description: "부드럽고 깊은 복합미", imageUrl: "https://images.unsplash.com/photo-1624434261316-b7c968b13869?w=800&auto=format&fit=crop&q=60" },
    { id: "chivas-18", name: "Chivas Regal 18", price: 15000, abv: 40, age: 18, region: "Scotland", category: "블렌디드 스카치", description: "초콜릿과 말린 과일의 풍미", imageUrl: "https://images.unsplash.com/photo-1624840769924-8ee545e95229?w=800&auto=format&fit=crop&q=60" },
    { id: "dewars-12", name: "Dewar's 12", price: 11000, abv: 40, age: 12, region: "Scotland", category: "블렌디드 스카치", description: "꿀과 배, 바닐라의 조화", imageUrl: "https://images.unsplash.com/photo-1582336959301-91183b35a6b9?w=800&auto=format&fit=crop&q=60" },
    { id: "bushmills-10", name: "Bushmills 10", price: 12000, abv: 40, age: 10, region: "Ireland", category: "아이리시 위스키", description: "꿀과 바닐라, 사과 향의 부드러움", imageUrl: "https://images.unsplash.com/photo-1508057198894-247b23fe5ade?w=800&auto=format&fit=crop&q=60" },
    { id: "jameson", name: "Jameson", price: 9000, abv: 40, age: null, region: "Ireland", category: "아이리시 위스키", description: "라이트하고 스무스한 바디", imageUrl: "https://images.unsplash.com/photo-1581695144789-1c42a8c161c5?w=800&auto=format&fit=crop&q=60" },
    { id: "redbreast-12", name: "Redbreast 12", price: 17000, abv: 40, age: 12, region: "Ireland", category: "아이리시 위스키", description: "셰리와 오크, 스파이스의 밸런스", imageUrl: "https://images.unsplash.com/photo-1571246284575-c6dcf86c3999?w=800&auto=format&fit=crop&q=60" },
    { id: "hibiki-harmony", name: "Hibiki Japanese Harmony", price: 21000, abv: 43, age: null, region: "Japan", category: "일본 위스키", description: "꽃향기와 꿀, 오크의 부드러운 조화", imageUrl: "https://images.unsplash.com/photo-1607518124360-84f5e0af3dc3?w=800&auto=format&fit=crop&q=60" },
    { id: "yamazaki-12", name: "Yamazaki 12", price: 30000, abv: 43, age: 12, region: "Japan", category: "일본 위스키", description: "복숭아, 바닐라, 오크의 밸런스", imageUrl: "https://images.unsplash.com/photo-1632187988684-67cde5f80e4d?w=800&auto=format&fit=crop&q=60" },
    { id: "nikka-coffey", name: "Nikka Coffey Grain", price: 16000, abv: 45, age: null, region: "Japan", category: "일본 위스키", description: "바닐라, 카라멜, 시트러스", imageUrl: "https://images.unsplash.com/photo-1600950200121-b4939de211f6?w=800&auto=format&fit=crop&q=60" },
    { id: "makers-46", name: "Maker's Mark 46", price: 14000, abv: 47, age: null, region: "USA", category: "버번 & 라이", description: "스파이스와 바닐라의 진한 풍미", imageUrl: "https://images.unsplash.com/photo-1614709125953-34c90d48e3a1?w=800&auto=format&fit=crop&q=60" },
    { id: "woodford-double", name: "Woodford Reserve Double Oaked", price: 17000, abv: 45.2, age: null, region: "USA", category: "버번 & 라이", description: "토피, 캐러멜, 오크의 달콤함", imageUrl: "https://images.unsplash.com/photo-1553484771-5c9124303e4b?w=800&auto=format&fit=crop&q=60" },
    { id: "bulleit-rye", name: "Bulleit Rye", price: 12000, abv: 45, age: null, region: "USA", category: "버번 & 라이", description: "라이스파이스와 오크의 단단함", imageUrl: "https://images.unsplash.com/photo-1546820389-44d77e1f3b31?w=800&auto=format&fit=crop&q=60" },
    { id: "balvenie-14", name: "Balvenie 14 Caribbean Cask", price: 20000, abv: 43, age: 14, region: "Scotland", category: "싱글 몰트 스카치", description: "럼 캐스크 감귤&바닐라", imageUrl: "https://images.unsplash.com/photo-1497534446932-c925b458314e?w=800&auto=format&fit=crop&q=60" },
    { id: "ardbeg-10", name: "Ardbeg 10", price: 18000, abv: 46, age: 10, region: "Islay, Scotland", category: "싱글 몰트 스카치", description: "강렬한 피트&연기, 바다", imageUrl: "https://images.unsplash.com/photo-1614709126328-19b68f2a89e1?w=800&auto=format&fit=crop&q=60" }
  ];

  const categoryNames = ["싱글 몰트 스카치", "블렌디드 스카치", "아이리시 위스키", "일본 위스키", "버번 & 라이"];

  /* ===== 상태 & 유틸 ===== */
  let activeCategory = categoryNames[0];
  const cart = new Map(); // key: id, value: { item, qty }
  const formatWon = (n) => n.toLocaleString('ko-KR') + '원';
  const byCategory = whiskeyMenu.reduce((acc, item) => { (acc[item.category] ||= []).push(item); return acc; }, {});

  /* ===== 렌더 ===== */
  function renderTabs() {
    const tabs = document.getElementById('tabs');
    tabs.innerHTML = '';
    categoryNames.forEach(cat => {
      const btn = document.createElement('button');
      btn.className = 'px-3 py-1.5 rounded-full text-sm border ' + (cat === activeCategory ? 'bg-amber-600 text-white border-amber-600' : 'bg-white text-gray-700 border-gray-200 hover:bg-gray-50');
      btn.textContent = cat;
      btn.onclick = () => { activeCategory = cat; renderTabs(); renderMenu(); };
      tabs.appendChild(btn);
    });
  }

  function cardTemplate(item) {
    return `
      <div class="bg-white rounded-2xl shadow-sm hover:shadow-md transition overflow-hidden border border-gray-100">
        <div class="aspect-[4/5] bg-gray-100 overflow-hidden">
          <img src="${item.imageUrl}" alt="${item.name}" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1514361892635-6d061d863f7b?w=600&auto=format&fit=crop'"/>
        </div>
        <div class="p-4">
          <h3 class="font-semibold text-lg text-gray-900">${item.name}</h3>
          <div class="flex items-center justify-between mt-2">
            <span class="text-amber-700 font-bold">${formatWon(item.price)}</span>
            <button class="px-3 h-9 rounded-lg border text-sm font-medium hover:bg-gray-50 add-btn" data-id="${item.id}">추가</button>
          </div>
          <p class="text-sm text-gray-600 mt-2">${item.description}</p>
          <div class="flex gap-2 text-xs text-gray-500 mt-2">
            <span>ABV ${item.abv}%</span>
            ${item.age ? `<span>• ${item.age}년</span>` : ''}
            <span>• ${item.region}</span>
          </div>
        </div>
      </div>`;
  }

  function renderMenu() {
    const grid = document.getElementById('menuGrid');
    const items = byCategory[activeCategory] || [];
    grid.innerHTML = items.map(cardTemplate).join('');
    grid.onclick = (e) => {
      const btn = e.target.closest('.add-btn');
      if (!btn) return;
      const id = btn.dataset.id;
      const item = whiskeyMenu.find(i => i.id === id);
      const prev = cart.get(id) || { item, qty: 0 };
      cart.set(id, { item, qty: prev.qty + 1 });
      renderCart();
    };
  }

  function renderCart() {
    const list = document.getElementById('cartList');
    const entries = Array.from(cart.values());
    if (entries.length === 0) {
      list.innerHTML = '<p class="py-8 text-center text-gray-500">아직 담긴 항목이 없습니다.</p>';
    } else {
      list.innerHTML = entries.map(({ item, qty }) => `
        <div class="py-3 flex items-center justify-between gap-3">
          <div class="flex items-center gap-3 min-w-0">
            <img src="${item.imageUrl}" alt="" class="w-12 h-12 rounded-lg object-cover"/>
            <div class="min-w-0">
              <p class="font-medium truncate">${item.name}</p>
              <p class="text-xs text-gray-500">${formatWon(item.price)} • ABV ${item.abv}%</p>
            </div>
          </div>
          <div class="flex items-center gap-2 shrink-0">
            <button class="w-8 h-8 rounded-lg border hover:bg-gray-50 qty-btn" data-id="${item.id}" data-delta="-1">-</button>
            <span class="w-6 text-center">${qty}</span>
            <button class="w-8 h-8 rounded-lg border hover:bg-gray-50 qty-btn" data-id="${item.id}" data-delta="1">+</button>
            <button class="ml-1 text-xs text-gray-500 hover:text-red-600 remove-btn" data-id="${item.id}">삭제</button>
          </div>
        </div>
      `).join('');
    }
    const subtotal = entries.reduce((sum, {item, qty}) => sum + item.price * qty, 0);
    document.getElementById('subtotal').textContent = formatWon(subtotal);
    document.getElementById('grandTotal').textContent = formatWon(subtotal);

    list.onclick = (e) => {
      const qtyBtn = e.target.closest('.qty-btn');
      if (qtyBtn) {
        const id = qtyBtn.dataset.id;
        const delta = parseInt(qtyBtn.dataset.delta, 10);
        const cur = cart.get(id);
        if (!cur) return;
        const nextQty = cur.qty + delta;
        if (nextQty <= 0) cart.delete(id); else cart.set(id, { item: cur.item, qty: nextQty });
        renderCart();
        return;
      }
      const rm = e.target.closest('.remove-btn');
      if (rm) {
        cart.delete(rm.dataset.id);
        renderCart();
      }
    };
  }

  function openModal() {
    const receipt = document.getElementById('receipt');
    const entries = Array.from(cart.values());
    if (entries.length == 0) {
      receipt.innerHTML = '<p>담긴 항목이 없습니다.</p>';
    } else {
      const lines = entries.map(({ item, qty }) => 
        `<div class="flex justify-between"><span>${item.name} × ${qty}</span><span>${formatWon(item.price*qty)}</span></div>`
      );
      const total = entries.reduce((s, {item, qty}) => s + item.price*qty, 0);
      receipt.innerHTML = lines.join('') + 
        `<hr class="my-2"/><div class="flex justify-between font-semibold"><span>총합</span><span>${formatWon(total)}</span></div>`;
    }
    document.getElementById('modal').classList.remove('hidden');
    document.getElementById('modal').classList.add('flex');
  }
  function closeModal() {
    const modal = document.getElementById('modal');
    modal.classList.add('hidden');
    modal.classList.remove('flex');
  }

  document.getElementById('clearCart').onclick = () => { cart.clear(); renderCart(); };
  document.getElementById('checkout').onclick = () => { openModal(); };
  document.getElementById('closeModal').onclick = closeModal;
  document.getElementById('newOrder').onclick = () => { cart.clear(); renderCart(); closeModal(); };

  renderTabs();
  renderMenu();
  renderCart();
  </script>
</body>
</html>